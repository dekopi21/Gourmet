#{extends '/portail/partenaire/Dashboard/dashboard.html'/}
#{set title:'Liste des categories de plats'/}

<h3 class="text-primary text-center"><strong>Liste des plats et leurs prix</strong></h3>
<table class="table table-responsive table-bordered table-hover">
    <thead>
    <tr class="active text-center text-primary">
        <td class="text-center" hidden><strong>ID</strong></td>
        <td class="text-center"><strong>PLAT</strong></td>
        <td class="text-center"><strong>IMAGE</strong></td>
        <td class="text-center"><strong>MONTANT</strong></td>
        <td class="text-center"><strong>MODIFIER</strong></td>
        <td class="text-center"><strong>SUPPRIMER</strong></td>
    </tr>
    </thead>
    <tbody>
    #{list items:datePrixes,as:'DT'}
    <tr class="text-center">
        <td class="text-center" hidden>${DT.getId()}</td>
        <td class="text-center">${DT.findPlatByObject(DT.getPlat())}</td>
        <td class="text-center"><img src="${DT.findImageByObject(DT.getPlat())}" alt="Image plat" height="30" width="30"></td>
        <td class="text-center">${DT.getMontant()}</td>
        <td ><span class="glyphicon glyphicon-pencil" data-id="${DT.getId()}" data-toggle="modal" data-target="#CatModif" onclick="showEditModalDP('${DT.getId()}', '${DT.findPlatByObject(DT.getPlat())}', '${DT.getMontant()}')"></span></td>
        <td ><span class="glyphicon glyphicon-trash" data-id="${DT.getId()}" data-toggle="modal" data-target="#catSupp" onclick="showModalSuppDP('${DT.getId()}', '${DT.findPlatByObject(DT.getPlat())}', '${DT.getMontant()}')"></span></td>
    </tr>
    #{/list}
    </tbody>
</table>


<div class="modal fade" id="CatModif" tabindex="-1" role="dialog" aria-labelledby="CatModif">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="menuTitle">MODIFIER UN PRIX</h4>
            </div>
            <div class="modal-body">
                <div id="formCat">
                    <form action="@{controllers.restaurants.DatePrixs.modifDPrix()}" class="form-horizontal">

                        <div class="form-group" hidden>
                            <label for="idModifDPrix" class="col-sm-5 control-label text-justifie">id</label>
                            <div class="col-sm-7">
                                <input type="text" class="form-control" id="idModifDPrix" name="idModifDPrix" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="nomCatModif" class="col-sm-3 control-label text-justifie">PLAT</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="idPlatModif" name="idPlatModif" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="descCatModif" class="col-sm-3 control-label text-justifie">MONTANT</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="montantModifDPrix" name="montantModifDPrix" required>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" type="submit">MODIFIER</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">FERMER</button>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="catSupp" tabindex="-1" role="dialog" aria-labelledby="catSupp">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="CatTitle">SUPPRIMER UNE CATEGORIE</h4>
            </div>
            <div class="modal-body">
                <div id="formTypeMenu">
                    <form action="@{controllers.restaurants.DatePrixs.suppDPrix()}" class="form-horizontal">

                        <div class="form-group" hidden>
                            <label for="idSuppDp" class="col-sm-3 control-label text-justifie">id</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="idSuppDp" name="idSuppDp">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="libelleDPSupp" class="col-sm-3 control-label text-justifie">PLAT</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="libelleDPSupp" name="libelleDPSupp">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="montantDPSupp" class="col-sm-3 control-label text-justifie">MONTANT</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="montantDPSupp" name="montantDPSupp">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-danger" type="submit">SUPPRIMER</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">FERMER</button>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>

<script>

    function showEditModalDP(id, plat, montant) {
        $("#idModifDPrix").val(id);
        $("#idPlatModif").val(plat);
        $("#montantModifDPrix").val(montant);
        $("#myModal").modal("show");
    }

    function showModalSuppDP(id, plat, montant) {
        $("#idSuppDp").val(id);
        $("#libelleDPSupp").val(plat);
        $("#montantDPSupp").val(montant);
        $("#delete-modal").modal("show");
    }


</script>