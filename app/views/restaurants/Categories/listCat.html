#{extends '/portail/partenaire/Dashboards/dashboard.html'/}
#{set title:'Liste des categories de plats'/}

<h3 class="text-primary text-center"><strong>Liste des cat√©gories</strong></h3>
    <table class="table table-responsive table-bordered table-hover">
        <thead>
        <tr class="active text-center text-primary">
            <td class="text-center" hidden><strong>ID</strong></td>
            <td class="text-center"><strong>NOM</strong></td>
            <td class="text-center"><strong>DESCRIPTION</strong></td>
            <td class="text-center"><strong>MODIFIER</strong></td>
            <td class="text-center"><strong>SUPPRIMER</strong></td>
        </tr>
        </thead>
        <tbody>
        #{list items:categorieList,as:'Cat'}
        <tr class="text-center">
            <td class="text-center" hidden>${Cat.getId()}</td>
            <td class="text-center">${Cat.getNom()}</td>
            <td class="text-center">${Cat.getDescription()}</td>
            <td ><span class="glyphicon glyphicon-pencil" data-id="${Cat.getId()}" data-toggle="modal" data-target="#CatModif" onclick="showEditModalCat('${Cat.getId()}', '${Cat.getNom()}', '${Cat.getDescription()}')"></span></td>
            <td ><span class="glyphicon glyphicon-trash" data-id="${Cat.getId()}" data-toggle="modal" data-target="#catSupp" onclick="showModalSuppCat('${Cat.getId()}', '${Cat.getNom()}')"></span></td>
        </tr>
        #{/list}
        </tbody>
    </table>


<div class="modal fade" id="CatModif" tabindex="-1" role="dialog" aria-labelledby="CatModif">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="menuTitle">MODIFIER UNE CATEGORIE</h4>
            </div>
            <div class="modal-body">
                <div id="formCat">
                    <form action="@{controllers.restaurants.Categories.modifCategorie()}" class="form-horizontal">

                        <div class="form-group" hidden>
                            <label for="idCatModif" class="col-sm-5 control-label text-justifie">id</label>
                            <div class="col-sm-7">
                                <input type="text" class="form-control" id="idCatModif" name="idCatModif" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="nomCatModif" class="col-sm-3 control-label text-justifie">LIBELLE</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="nomCatModif" name="nomCatModif" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="descCatModif" class="col-sm-3 control-label text-justifie">DESCRIPTION</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="descCatModif" name="descCatModif" required>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-primary" type="submit">MODIFIER</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">FERMER</button>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>

<div class="modal fade" id="catSupp" tabindex="-1" role="dialog" aria-labelledby="catSupp">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="CatTitle">SUPPRIMER UNE CATEGORIE</h4>
            </div>
            <div class="modal-body">
                <div id="formTypeMenu">
                    <form action="@{controllers.restaurants.Categories.suppCat()}" class="form-horizontal">

                        <div class="form-group" hidden>
                            <label for="idCatSup" class="col-sm-3 control-label text-justifie">id</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="idCatSup" name="idCatSup">
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="libelleCat" class="col-sm-3 control-label text-justifie">LIBELLE</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="libelleCatSupp" name="libelleCatSupp">
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-danger" type="submit">SUPPRIMER</button>
                            <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>

<script>

    function showEditModalCat(id, libelle, description) {
        $("#idCatModif").val(id);
        $("#nomCatModif").val(libelle);
        $("#descCatModif").val(description);
        $("#myModal").modal("show");
    }

    function showModalSuppCat(id, libelle) {
        $("#idCatSup").val(id);
        $("#libelleCatSupp").val(libelle);
        $("#delete-modal").modal("show");
    }


</script>